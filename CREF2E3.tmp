\documentclass[11pt]{article}
\usepackage{booktabs}
\usepackage{fullpage}
\usepackage{titlesec}
%\newcommand{\sectionbreak}{\clearpage}
\usepackage{amsmath,amsfonts,amsthm,mathrsfs,xspace,graphicx}
\usepackage[backref,colorlinks,citecolor=blue,bookmarks=true]{hyperref}
\usepackage{mathpazo}
\usepackage{endnotes}
\usepackage{color}
\usepackage{float}
\usepackage{xcolor}
\usepackage{mdframed}
\usepackage{bbm}
\usepackage{suffix} % for *-version commands
\usepackage{times}
\usepackage{tabularx}
\usepackage{makecell}
\usepackage{amssymb,latexsym}
%\usepackage{IEEEtrantools}
\usepackage[capitalize]{cleveref}
\usepackage{enumitem}
\usepackage{tikz}
\usepackage{tikz-cd}
\usepackage{multirow}
\usepackage[section]{placeins}
\usepackage[affil-it]{authblk}


\mdfdefinestyle{figstyle}{ %
  linecolor=black!7, %
  backgroundcolor=black!7, %
  innertopmargin=10pt, %
  innerleftmargin=25pt, %
  innerrightmargin=25pt, %
  innerbottommargin=10pt %
}

\newtheorem{theorem}{Theorem}[section]
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{conjecture}[theorem]{Conjecture}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{claim}[theorem]{Claim}
\newtheorem{fact}[theorem]{Fact}
\newtheorem{corollary}[theorem]{Corollary}

\newtheorem{remark}[theorem]{Remark}

\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{example}[theorem]{Example}

\newcommand{\beq}{\begin{eqnarray}}
\newcommand{\eeq}{\end{eqnarray}}

\newcommand{\code}{\mathcal{C}}
\newcommand{\strategy}{\mathscr{S}}
\newcommand{\algebra}{\mathscr{A}}

\newcommand{\ket}[1]{|#1\rangle}
\newcommand{\bra}[1]{\langle#1|}
\newcommand{\ketbra}[2]{\ket{#1}\!\bra{#2}}
\newcommand{\ip}[2]{\langle #1 \! | #2 \rangle}
\newcommand{\proj}[1]{\ket{#1}\!\bra{#1}}
\newcommand{\Tr}{\mbox{\rm Tr}}
\newcommand{\Id}{\ensuremath{I}}
\DeclareMathOperator*{\Expectation}{\mathbb{E}}
\newcommand{\Es}[1]{\Expectation_{#1}}

\newcommand{\reg}[1]{{\textsf{#1}}}
\newcommand{\ol}[1]{\overline{#1}}

\newcommand{\field}{\mathbb{F}_2}
\newcommand{\C}{\ensuremath{\mathbb{C}}}
\newcommand{\N}{\ensuremath{\mathbb{N}}}
\newcommand{\bbN}{\ensuremath{\mathbb{N}}}
\newcommand{\complex}{\ensuremath{\mathbb{C}}}
\newcommand{\real}{\ensuremath{\mathbb{R}}}
%\newcommand{\natural}{\ensuremath{\mathbb{N}}}

\newcommand{\bij}{\pi}
\newcommand{\qp}{\tau}
\newcommand{\dlS}{\ensuremath{\rm dlS}}

\newcommand{\F}{\ensuremath{\mathbb{F}}}
\newcommand{\M}{\ensuremath{\mathbb{M}}}
\newcommand{\ot}{\otimes}
\newcommand{\Fp}{\F_p}
\newcommand{\Fq}{\field}
\newcommand{\BH}{\textsc{BH}}
\newcommand{\ld}{\textsc{ld}}
\newcommand{\downsize}{\kappa}
\newcommand{\tobin}{\flat}
\newcommand{\downsizem}{\chi}

\newcommand{\K}{\ensuremath{\mathbb{K}}}
\newcommand{\R}{\ensuremath{\mathbb{R}}}
\newcommand{\Z}{\ensuremath{\mathbb{Z}}}

\newcommand{\mA}{\ensuremath{\mathcal{A}}}
\newcommand{\mB}{\ensuremath{\mathcal{B}}}
\newcommand{\mC}{\ensuremath{\mathcal{C}}}
\newcommand{\mE}{\ensuremath{\mathcal{E}}}
\newcommand{\mD}{\ensuremath{\mathcal{D}}}
\newcommand{\mF}{\ensuremath{\mathcal{F}}}
\newcommand{\mG}{\ensuremath{\mathcal{G}}}
\newcommand{\mH}{\ensuremath{\mathcal{H}}}
\newcommand{\mK}{\ensuremath{\mathcal{K}}}
\newcommand{\mM}{\ensuremath{\mathcal{M}}}
\newcommand{\mI}{\ensuremath{\mathcal{I}}}
\newcommand{\mJ}{\ensuremath{\mathcal{J}}}
\newcommand{\cM}{\ensuremath{\mathcal{M}}}
\newcommand{\mP}{\ensuremath{\mathcal{P}}}
\newcommand{\mQ}{\ensuremath{\mathcal{Q}}}
\newcommand{\mR}{\ensuremath{\mathcal{R}}}
\newcommand{\mS}{\ensuremath{\mathcal{S}}}
\newcommand{\mT}{\ensuremath{\mathcal{T}}}
\newcommand{\mU}{\ensuremath{\mathcal{U}}}
\newcommand{\mX}{\ensuremath{\mathcal{X}}}
\newcommand{\mY}{\ensuremath{\mathcal{Y}}}

\newcommand{\Inv}{\ensuremath{\textsc{Inv}}}
\newcommand{\GEN}{\ensuremath{\textsc{GEN}}}
\newcommand{\SAMP}{\ensuremath{\textsc{SAMP}}}
\newcommand{\epr}{\ensuremath{\textsc{epr}}}
\newcommand{\RM}{\ensuremath{\textsc{RM}}}
\newcommand{\Had}{\ensuremath{\textsc{Had}}}
\newcommand{\HRM}{\ensuremath{\textsc{HRM}}}


\newcommand{\Alg}{\mathcal{A}}
\newcommand{\ind}{\ensuremath{\mathrm{ind}}}


\newcommand{\setft}[1]{\mathrm{#1}}
\newcommand{\Density}{\setft{D}}
\newcommand{\Pos}{\setft{Pos}}
\newcommand{\Proj}{\setft{Proj}}
\newcommand{\Channel}{\setft{C}}
\newcommand{\Unitary}{\setft{U}}
\newcommand{\Herm}{\setft{Herm}}
\newcommand{\Obs}{\setft{Obs}}
\newcommand{\Lin}{\setft{L}}
\newcommand{\Trans}{\setft{T}}
\DeclareMathOperator{\poly}{poly}
\DeclareMathOperator{\negl}{negl}
\newcommand{\dset}{G}

\newcommand{\val}{\ensuremath{\mathrm{val}}}
\newcommand{\valco}{\ensuremath{\mathrm{val}^{\mathrm{co}}}}
\newcommand{\ia}{\Id_\alice}
\newcommand{\ib}{\Id_\bob}

\newcommand{\desc}[1]{\overline{\cal{#1}}}
\newcommand{\supp}{\textsc{Supp}}
\newcommand{\Gen}{\textsc{Gen}}
\newcommand{\Enc}{\textsc{Enc}}
\newcommand{\Dec}{\textsc{Dec}}

\newcommand{\GenTrap}{\textsc{GenTrap}}
\newcommand{\Invert}{\textsc{Invert}}
\newcommand{\lossy}{\textsc{lossy}}

\newcommand{\rand}{\textrm{rand}}
\newcommand{\had}{\textsc{Had}}


\newcommand{\eps}{\varepsilon}
\newcommand{\ph}{\ensuremath{\varphi}}


\newcommand{\ac}{\textsc{ac}}
\newcommand{\GX}{\textsc{Gap-Maxcut}}
\newcommand{\GNI}{\textsc{Graph Non-Isomorphism}}


\newcommand{\Acc}{\textsc{Acc}}
\newcommand{\Samp}{\textsc{Samp}}
\newcommand{\Ext}{\ensuremath{\text{Ext}}}

\newcommand{\BD}{\mathbb{QB}}
\newcommand{\DD}{\mathbb{D}}
\newcommand{\DDb}{\mathbb{D'}}
\newcommand{\Pot}{\Phi}
\newcommand{\inj}{J}
\newcommand{\mZ}{\mathcal{Z}}
\newcommand{\mN}{\mathcal{N}}
\newcommand{\vs}{\vspace{2mm}~\newline\noindent}
\newcommand{\vb}{\vspace{3mm}\noindent}
\newcommand{\sX}{\mathcal{X}}
\newcommand{\sA}{\mathcal{A}}
\newcommand{\sB}{\mathcal{B}}
\newcommand{\sY}{\mathcal{Y}}
\newcommand{\sR}{\mathcal{R}}


\newcommand{\trnq}[1]{\left[ {#1} \right]_q}

\DeclareMathOperator{\polylog}{polylog}
\newcommand{\mx}[1]{\mathbf{{#1}}}
\newcommand{\vc}[1]{\mathbf{{#1}}}
\newcommand{\abs}[1]{\left\vert {#1} \right\vert}
\newcommand{\norm}[1]{\left\| {#1} \right\|}
\newcommand{\for}{\text{for }}

\DeclareMathOperator{\arcsinh}{arcsinh}
\DeclareMathOperator{\tr}{tr}

\newcommand{\E}{\mathop{\mathbb{E}}\displaylimits} % Expectation

\newcommand{\unif}{\mathcal{U}}
\newcommand{\pt}{\textrm{pt}}
\newcommand{\sample}{\textrm{sample}}
\newcommand{\test}{\textrm{test}}
\newcommand{\free}{\mathcal{F}}
\newcommand{\plane}{\mathcal{P}}
\newcommand{\lines}{\mathcal{L}}
\newcommand{\clines}{\mathcal{CL}}
\newcommand{\pl}{\mathbf{p}}
\newcommand{\individual}{\textrm{individual}}
\newcommand{\blocks}{\textrm{blocks}}
\newcommand{\liness}{\textrm{lines}}
\newcommand{\lp}{\mathcal{LP}}
\newcommand{\Pl}{\ensuremath{\mathrm{Pl}}}
\newcommand{\Ln}{\ensuremath{\mathrm{Lines}}}
\newcommand{\mode}{\mathfrak{m}}
\newcommand{\ECC}{\ensuremath{\textsc{ECC}}}
\newcommand{\EC}{\ensuremath{\textsc{EC}}}
\newcommand{\ENC}{\ensuremath{\textsc{ENC}}}
\newcommand{\cktval}{\ensuremath{\textsc{CKTVAL}}}


\newcommand{\GL}{\mathrm{GL}}
\newcommand{\Matrix}{\mathrm{M}}
\newcommand{\End}{\mathrm{End}}
\newcommand{\Aut}{\mathrm{Aut}}

\newcommand{\game}{\mathfrak{G}}
\newcommand{\sampler}{\mathcal{S}}
\newcommand{\decider}{\mathcal{D}}
\newcommand{\verifier}{\mathcal{V}}


\newcommand{\type}{\mathcal{T}}
\newcommand{\lt}{\mathcal{L}}
\newcommand{\rt}{\mathcal{R}}
\newcommand{\checker}{\mathcal{C}}


\newcommand{\gamestyle}[1]{\ensuremath{\textsc{#1}}\xspace}
\newcommand{\qld}{\gamestyle{QLD}}
\newcommand{\ms}{\gamestyle{MS}}
\newcommand{\pauli}{\gamestyle{P}}
%\newcommand{\bp}{\gamestyle{BP}}
\newcommand{\ora}{\gamestyle{Orac}}
\newcommand{\pcp}{\gamestyle{PCP}}
\newcommand{\ar}{\gamestyle{AR}}
\newcommand{\intro}{\gamestyle{Intro}}

\newcommand{\labelstyle}[1]{\ensuremath{\textsc{#1}}\xspace}
\newcommand{\EPR}{\labelstyle{EPR}}
\newcommand{\aux}{\labelstyle{aux}}
\newcommand{\ancilla}{\labelstyle{anc}}
\newcommand{\msc}{\labelstyle{MC}}
\newcommand{\msv}{\labelstyle{MV}}
\newcommand{\vertex}[1]{\labelstyle{V#1}}
\newcommand{\edge}[1]{\labelstyle{N#1}}
\newcommand{\basis}{\labelstyle{W}}
\newcommand{\xpt}{\labelstyle{X}}
\newcommand{\zpt}{\labelstyle{Z}}
\newcommand{\rxpt}{\labelstyle{R}_\xpt}
\newcommand{\rzpt}{\labelstyle{R}_\zpt}
\newcommand{\dir}[1]{\labelstyle{V#1}}
\newcommand{\coord}{\labelstyle{I}}
\newcommand{\intercept}{\labelstyle{U}}
\newcommand{\plf}{\labelstyle{Pl}}
\newcommand{\lnf}{\labelstyle{Ln}}
\newcommand{\ptf}{\labelstyle{Pt}}
\newcommand{\full}{\labelstyle{full}}
\newcommand{\opt}{\labelstyle{opt}}
\newcommand{\partition}{\mathcal{B}}

\newcommand{\tvarstyle}[1]{\mathsf{#1}}
\newcommand{\tvar}{\ensuremath{\tvarstyle{t}}}
\newcommand{\lvar}{\ensuremath{\tvarstyle{u}}}
\newcommand{\rvar}{\ensuremath{\tvarstyle{v}}}
\newcommand{\pvar}{\ensuremath{\tvarstyle{p}}}
\newcommand{\ovar}{\ensuremath{\tvarstyle{o}}}
\newcommand{\trole}{\ensuremath{v}} % used in intro types

\newcommand{\types}{\labelstyle{T}}

\newcommand{\decode}{\labelstyle{Decode}}

%\newcommand{\alice}{\labelstyle{Alice}}
%\newcommand{\bob}{\labelstyle{Bob}}
\newcommand{\alice}{\labelstyle{A}}
\newcommand{\bob}{\labelstyle{B}}

\newcommand{\oracle}{\labelstyle{Oracle}}
\newcommand{\ab}{\{\alice, \bob\}}

\newcommand{\typestyle}[1]{\ensuremath{\textsc{#1}}\xspace}
\newcommand{\Type}{\typestyle{Type}}
\newcommand{\Plane}{\typestyle{Plane}}
\renewcommand{\line}{\mathbf{\ell}}
\newcommand{\Llane}{\typestyle{Line}}
\newcommand{\Point}{\typestyle{Point}}
\newcommand{\HPoint}{\typestyle{HPoint}}
\newcommand{\Line}{\typestyle{Line}}
\newcommand{\ALine}{\typestyle{ALine}}
\newcommand{\DLine}{\typestyle{DLine}}
\newcommand{\Pair}{\typestyle{Pair}}
\newcommand{\Constraint}{\typestyle{Constraint}}
\newcommand{\Variable}{\typestyle{Variable}}
\newcommand{\Pauli}{\typestyle{Pauli}}
\newcommand{\Sample}{\typestyle{Sample}}
\newcommand{\Read}{\typestyle{Read}}
\newcommand{\MeasureX}{\typestyle{MeasureX}}
\newcommand{\Hide}[1]{\typestyle{Hide}_{#1}}
\newcommand{\HideX}[1]{\typestyle{HideX}_{#1}}
\newcommand{\Target}[1]{\typestyle{Target}_{#1}}
\newcommand{\Oracle}{\typestyle{Oracle}}
\newcommand{\Introspect}{\typestyle{Intro}}
\newcommand{\Intro}{\typestyle{Intro}}
\newcommand{\Simple}{\typestyle{Simple}}
\newcommand{\Eval}{\typestyle{Eval}}
\newcommand{\Agg}{\typestyle{Agg}}
\newcommand{\Input}{\typestyle{Input}}
\newcommand{\Skip}{\typestyle{Skip}}
\newcommand{\Alice}{\typestyle{Alice}}
\newcommand{\Bob}{\typestyle{Bob}}
\newcommand{\Edge}{\typestyle{Alice}}
\newcommand{\Vertex}{\typestyle{Bob}}
\newcommand{\Anchor}{\typestyle{Anchor}}
\renewcommand{\Game}{\typestyle{Game}}
\newcommand{\AB}{\{\alice, \bob\}}
\newcommand{\ctrl}{\labelstyle{c}}
\newcommand{\target}{\labelstyle{t}}

\newcommand{\abc}[1][\delta]{\otimes I_\bob \simeq_{#1} I_\alice \otimes}

\newcommand{\ldc}{k} % number of copies of classical ld tests

\newcommand{\class}[1]{\ensuremath{\mathsf{#1}}\xspace}
\newcommand{\NP}{\class{NP}} %
\newcommand{\IP}{\class{IP}} %
\newcommand{\EXP}{\class{EXP}} %
\newcommand{\NEXP}{\class{NEXP}} %
\newcommand{\QMA}{\class{QMA}} %
\newcommand{\QMIP}{\class{QMIP}} %
\WithSuffix\newcommand\QMIP*{\ensuremath{\class{QMIP}^*}} %
\newcommand{\PSPACE}{\class{PSPACE}} %
\newcommand{\PCP}{\class{PCP}} %
\newcommand{\MIP}{\class{MIP}} %
\newcommand{\MIPco}{\class{MIP}^{\mathrm{co}}} %
\newcommand{\RE}{\class{RE}} %
\newcommand{\coRE}{\class{coRE}}
\newcommand{\NEEXP}{\class{NEEXP}} %
\newcommand{\NEEEXP}{\class{NEEEXP}}
\WithSuffix\newcommand\MIP*{\ensuremath{\class{MIP}^*}} %
\newcommand{\QIP}{\class{QIP}} %


\newcommand{\Ent}{\mathscr{E}}
\newcommand{\compr}{\textsc{Compr}}
\newcommand{\halt}{\textsc{Halt}}
\newcommand{\machine}{\cal{M}}
\renewcommand{\cal}[1]{\mathcal{#1}}
\newcommand{\Kleene}{\cal{K}}
\newcommand{\qldparams}{\mathsf{qldparams}}
\mathchardef\mhyphen="2D
\newcommand{\Fqldparams}{\F_2\mhyphen\mathsf{qldparams}}
\newcommand{\introparams}{\mathsf{introparams}}
\newcommand{\ldparams}{\mathsf{ldparams}}
\newcommand{\tmldparams}{\mathsf{tmldparams}}
\newcommand{\pcpparams}{\mathsf{pcpparams}}

\newcommand{\TMtoSAT}{\mathrm{TMtoSAT}}
\newcommand{\TMtoLD}{\mathrm{TMtoLD}}
\newcommand{\BoundedHalting}{\mathrm{BH}}
\newcommand{\timecomplexity}{\mathsf{TIME}}
\newcommand{\TIME}{\mathsf{TIME}}
\newcommand{\answer}{\mathsf{ANS}}
\newcommand{\MS}{\mathrm{MS}}

\newcommand{\accept}{\typestyle{Accept}}
\newcommand{\reject}{\typestyle{Reject}}

\newcommand{\anch}{\gamestyle{Anch}}
\newcommand{\ans}{\gamestyle{ANS}}
%%%%%%%self testing macros%%%%%%%%%%

\newcommand{\local}{\mathrm{local}}
%\newcommand{\aux}{\mathrm{aux}}


\newcommand{\G}{\mG}
\newcommand{\XZ}{\mathcal{B}}
\newcommand{\hilb}{\mathcal{H}}


%\newcommand{\tmstyle}[1]{\ensuremath{\textsf{#1}}}
\newcommand{\tmstyle}[1]{\ensuremath{\mathsf{#1}}}
\newcommand{\Compress}{\tmstyle{Compress}}
\newcommand{\ComputeRepetitions}{\tmstyle{ComputeRepetitions}}
\newcommand{\ComputeSampler}{\tmstyle{ComputeSampler}}
\newcommand{\RawIntroSampler}{\tmstyle{RawIntroSampler}}
\newcommand{\ComputeIntroSampler}{\tmstyle{IntroSampler}}
\newcommand{\RawIntroDecider}{\tmstyle{RawIntroDecider}}
\newcommand{\ComputeIntroDecider}{\tmstyle{IntroDecider}}
\newcommand{\ComputeIntroVerifier}{\tmstyle{IntroVerifier}}
\newcommand{\ComputeOracleVerifier}{\tmstyle{OracleVerifier}}
\newcommand{\ComputeAnsVerifier}{\tmstyle{AnsRedVerifier}}
\newcommand{\ComputeParrepVerifier}{\tmstyle{RepeatedVerifier}}
\newcommand{\ComputePCPVerifier}{\tmstyle{PCPVerifier}}
\newcommand{\ComputeFixedPoint}{\tmstyle{ComputeFixedPoint}}
\newcommand{\detype}{\tmstyle{Detype}}

\newenvironment{gamespec}{
  \begin{mdframed}[style=figstyle]}{
  \end{mdframed}}

\newcommand{\zero}{\mathrm{zero}}

%%%%%%%From NW19:%%%%%%%%%%
\newcommand{\polymeas}[3]{\mathrm{PolyMeas}(#1,#2,#3)}
\newcommand{\simulpolymeas}[4]{\mathrm{PolyMeas}(#1,#2,#3, #4)}

\newcommand{\eval}{\mathrm{eval}}

%\newcommand{\coin}{o}
\newcommand{\succinctdecider}{\ensuremath{\mathsf{SuccinctDecider}}}
\newcommand{\circuit}{\mathcal{C}}
\newcommand{\formula}{\mathcal{F}}
\newcommand{\bin}{\mathrm{binary}}
\newcommand{\pcpeval}{\Xi}
\newcommand{\pcpverifier}{\mathcal{M}_\ar}
\newcommand{\qlen}{Q}
\DeclareMathOperator{\ev}{eval}

\newcommand{\coded}{\mathrm{Dec}}
\newcommand{\hx}{\hat{x}}
\newcommand{\hz}{\hat{z}}
\newcommand{\htvar}{\hat{\tvar}}
\newcommand{\soundness}{\mathrm{sound}}

\newcommand{\rep}{\gamestyle{Rep}}
\newcommand{\sep}{\gamestyle{Sep}}

\newcommand{\binary}[1]{\mathrm{binary}_{#1}}
\newcommand{\num}[1]{\mathrm{number}_{#1}}
\newcommand{\canbasis}[1]{\mathrm{basis}(#1)}
\newcommand{\canH}[3]{H_{\mathrm{canon}, #1, #2, #3}}
\newcommand{\canlilh}[3]{h_{\mathrm{canon}, #1, #2, #3}}
\newcommand{\canin}[3]{\pi_{\mathrm{canon},#1,#2,#3}}
\newcommand{\canenc}[4]{g_{\mathrm{canon},#1,#2,#3,#4}}


% \usepackage{showlabels}
% \renewcommand{\showlabelfont}{\tiny\ttfamily\color{red}}

\bibliographystyle{alpha}

\newif\ifnotes\notestrue
%\newif\ifnotes\notesfalse

\input{marginnotes}
\begin{document}

\title{Efficient stability for the Pauli group}

\author{Thomas Vidick and Henry Yuen}
\date{\today}
\maketitle

\noteswarning


\begin{abstract}

\end{abstract}


\section{Introduction}

\tnote{Make the connection with LCS}


	\section{Preliminaries}

\subsection{Notation}

When we write $\Es{i\in \mX}$ where $\mX$ is a finite set, we mean the expectation over $i$ chosen uniformly at random from $\mX$, i.e.\ $\frac{1}{|\mX|} \sum_{i\in \mX}$. For a vector $u \in \mX^n$ and a subset $S \subseteq [n]$, we write $u_S$ to denote the vector in $\mX^S$ which is the restriction of $u$ to $S$.

\subsection{Algebra}

  A \emph{tracial von Neumann algebra} is a pair $(\mM,\tau)$ of a von Neumann algebra $\mM$ together with a normal faithful tracial state $\tau$ on $\mM$, which we often refer to as the \emph{trace}. The main example of interest is $\mM=M_n(\C)$, the algebra $n\times n$ complex matrices, with $\tau$ the dimension-normalized trace, which we denote $\tr(M)=\frac{1}{n}\Tr(M)$. 	We write $\|x\|_2=\tau(x^*x)^{1/2}$ for the $2$-norm on $\mM$.
	
	Let $B(\ell_2)$ be the von Neumann algebra of bounded operators on $\ell_2$, the Hilbert space of convergent sequences in $\C^\Z$ equipped with the usual Euclidean norm (for which we let $(e_i)_{i \in \Z}$ denote the standard basis). We denote $\mM_\infty = \mM \overline{\otimes} B(\ell_2)$, where the overline denotes closure for the operator topology. $\mM_\infty$ is a von Neumann algebra equipped with the (infinite) trace $\tau_\infty = \tau \otimes \Tr$, with $\Tr(x)=\sum_{i\in \Z} e_i^T X e_i$ the trace on $B(\ell_2)$. We generally identify $\mM$ with the ``corner'' $\mM\otimes e_{1,1}\subset \mM_\infty$. 

	We let $\F$ denote a finite field, and $\field$ the field with two elements. For $u\in \F^n$ for some $n$, we write $|u|$ for the Hamming weight of $u$, i.e.\ the number of nonzero coordinates. For $a,b \in \F^k$, we write $a \cdot b$ to denote the inner product $\sum_{i=1}^k a_i b_i$. 
	
	
	\subsection{Measurements}
	\label{sec:measurements}
	
	A POVM in $\mM$ with outcome set $\mA$ is a finite collection of positive semidefinite operators $\{P_a\}_{a\in \mA}$ such that $\sum_a P_a = \Id_\mM$. A POVM is \emph{projective} if for all $a$, $P_a$ is a projection. 
	Given a projective measurement $\{P_a\}_{a\in \field^k}$ and $b\in \field^k$ we define the corresponding \emph{observable} 
	\[ \widehat{P}(b) = \sum_a (-1)^{a\cdot b} P_a\;,\]
	which is self-adjoint and unitary. If $k=1$, we often use the shorthand $\widehat{P}$ for $\widehat{P}(1) = P_0-P_1$.
	
	We define a specific family of projective measurements on $M_{2^k}(\C)$ which are derived from the \emph{Pauli observables}. Define
	\[ \sigma^X = \begin{pmatrix} 0 & 1 \\ 1 & 0 \end{pmatrix}\;,\qquad \sigma^Z = \begin{pmatrix} 1 & 0 \\ 0 & -1\end{pmatrix}\;,\]
	and more generally for $a,b\in \F_2^k$ let $\sigma^X(a) = \bigotimes_{i=1}^t (\sigma^X)^{a_i}$ and $\sigma^Z(b) = \bigotimes_{i=1}^t (\sigma^Z)^{b_i}$, which are observables in $M_{2^k}(\C)$. These are self-adjoint unitary operators called Pauli observables. Each observable $\sigma^X(a)$ (resp. $\sigma^Z(b)$) corresponds to the \emph{Pauli measurement} $\{ \sigma^X_a \}_{a \in \F_2^k}$ (resp. $\{ \sigma^Z_b \}_{b \in \F_2^k}$) where (in a slight abuse of notation)  
	%	We slightly abuse notation and write 
	\[ \sigma^X_a = \Es{\alpha\in\F_2^k} (-1)^{a\cdot \alpha} \sigma^X(\alpha)\qquad\text{and}\qquad\sigma^Z_b = \Es{\beta\in\F_2^k} (-1)^{b\cdot\beta} \sigma^Z(\beta).\]
	It is easy to verify that $\{\sigma^X_a\}_a$ and $\{\sigma^Z_b\}_b$ are projections summing to identity.	
	
	
\subsection{Nonlocal games}

We give standard definitions on nonlocal games. 

\begin{definition}[Game]
A game is a tuple $(\mX,\mu,\mA,D)$ where $\mX$ is a finite set, $\mu$ a distribution on $\mX\times \mX$, $\mA=(\mA(x))_{x\in\mX}$ a collection of finite sets, and 
\[ D: \big\{ (x,y,a,b) : (x,y)\in\text{supp}(\mu),a\in\mA(x),b\in\mA(y)\big\} \;\to\;\{0,1\}\]
such that $D$ is symmetric, i.e. $D(x,y,a,b)=D(y,x,b,a)$ whenever both terms are defined. We often abuse notation and write $\mu$ for the symmetrized marginal of $\mu$, i.e.\ 
\[\mu(x) := \sum_{x'\in \mX} \frac{1}{2}\big(\mu(x,x')+\mu(x',x')\big)\;.\]
\end{definition}

The interpretation of $G=(\mX,\mu,\mA,D)$ as a nonlocal game is the following. In the ``game'', a referee is imagined to sample a pair of ``questions'' $(x,y)\sim \mu$. The question $x$ is sent to a first player, ``Alice,'' and the question $y$ is sent to a second player, ``Bob.'' Each player is tasked with responding with an answer $a\in \mA(x)$ for Alice, and $b\in \mA(y)$ for Bob. The referee accepts the players' answers if and only if $D(x,y,a,b)=1$. 

Nonlocal games provide a framework to study different kinds of bipartite correlations: depending on the level of coordination allowed between Alice and Bob, they may have varying chances of success in the game. 

In quantum mechanics, a local strategy for the players (meaning that each player is required to determine their answer locally, without exchanging information with the other player) is specified by the following. 

\begin{definition}[Synchronous strategy]
If $G=(\mX,\mu,\mA,D)$ is a game and $(\mM,\tau)$ a tracial von Neumann algebra, a \emph{synchronous strategy $\strategy$ for $G$ on $(\mM,\tau)$} is, for every $x\in \mX$, a projective measurement $(P^x_a)_{a\in \mA(x)}$ on $\mM$. The value of a strategy $\strategy$ in $G$ is 
\[ \omega(G;\strategy)\,=\, \sum_{(x,y)\in\mX\times\mX}\frac{1}{2}\big(\mu(x,y)+\mu(y,x)\big) \sum_{(a,b)\in\mA(x)\times\mA(y)} D(x,y,a,b)\, \tau\big(P^x_a \,P^y_b\big) \;.\footnote{Note the symmetrization of $\mu$. This is to avoid explicitly requiring $\mu$ to be permutation-invariant in the definition of a game.}\]
We say that $\strategy$ is \emph{perfect} if $\omega(G;\strategy)=1$.
\end{definition}
	
The name \emph{synchronous} stems from the fact that whenever an identical pair $(x,x)$ is chosen, $\tau(P^x_a P^x_b)=0$ for $a\neq b$ due to the requirement that $\{P^x_a\}_a$ is a projective measurement. Thus a synchronous strategy always returns the same answer to the same question. More general strategies, which allow different operators $\{P^x_a\}$ and $\{Q^y_b\}$, do not automatically enforce the synchronicity condition, but we do not consider such strategies here. 
	
		
\section{Efficient stability}

\subsection{Approximate homomorphisms}

Given a set $S$, we let $\mF(S)$ denote the free group generated by $S$. We freely identify functions from $S$ to $H$, where $H$ is any group, with homomorphisms from $\mF(S)$ to $H$. If $R$ is a subset of $\mF(S)$ then the quotient of $\mF(S)$ by the normal subgroup generated by $R$ is denoted $\langle S:R\rangle$. 

For convenience we adopt the following notation from~\cite{slofstra2019set}. A \emph{group over $\Z_2$} is a pair $(G,J)$ of a finitely presented group $G$ and a central element $J$ of $G$ of order $2$. Any such group has a presentation $G=\langle S:R\rangle$ where $J\in S$ and $R$ includes the relations $J^2=e$ and $[J,s]=e$ for every $e\in S\backslash\{J\}$. We use the notation 
\[ \langle S:R\rangle_{\Z_2} \,=\, \langle S\cup\{J\} : R\cup\{[J,s]=e:s\in S\}\cup\{J^2=e\}\rangle\;.\]
In~\cite[Section 2]{hadwin2018stability} a notion of $\eps$-\emph{almost homomorphism} from a finite group to a unital tracial $C^*$-algebra $\mA$ is introduced. Informally, an $\eps$-almost homomorphism of a finitely presented group $G=\langle S:R\rangle$ is a map from $S$ to $\mU(\mA)$ that approximately respects all relations in $R$. We give a variant of their definition that quantifies the error in an average sense. 

\begin{definition}
Let $G = \langle S:R\rangle $ be a finitely presented group, $\mu$ a distribution on $R$, and $(\mM,\tau)$ a tracial von Neumann algebra. An $(\eps,\mu)$-almost homomorphism of $G$ on $(\mM,\tau)$ is a homomorphism $\phi:\mF(S)\to\mU(\mM)$ such that
\[ \Es{r\sim \mu} \big\|  \phi(r) - \Id \|_\tau^2 \,\leq\, \eps\;.\]
\end{definition}

We note that this notion depends on the presentation of $G$, not only on the group itself. 
When the distribution $\mu$ is uniform over the set $R$, we simply write $\eps$-homomorphism. The definition is consistent with the usual notion of a (unitary) homomorphism, which is recovered when $\eps=0$. 

A stability result states that $\eps$-homomorphisms are close to exact hommorphisms. To measure the distance between homomorphisms into different algebras we make the following definition. 


\begin{definition}[Closeness]\label{def:close}
Let $\{U_i\}\subseteq \mM$ and $\{V_i\}\subseteq \mN$ be two families of unitaries on  tracial algebras $(\mM,\tau^\mM)$ and $(\mN,\tau^\mN)$ respectively, indexed by the same set $i\in \mI$. For $\delta\geq0$ and $\mu$ a measure on $\mI$ we say that $\{U_i\}$ and $\{V_i\}$ are $(\delta,\mu)$-close if there exists a projection $P\in\mM_\infty$ of finite trace such that $\mN=P\mM_\infty P$ and $\tau^\mN=\tau_\infty/\tau_\infty(P)$, and a partial isometry $w\in P \mM_\infty \Id_\mM$ such that 
\[ \Es{i\sim\mu} \big\| U_i - w^* V_i w \big\|_{\tau^\mM}^2 \,\leq\,\delta\]
and 
\[\max\big\{ \tau^\mM(\Id_\mM-w^*w)\,,\; \tau^\mN(P-ww^*)\big\} \,\leq\, \delta\;.\]
If the measure $\mu$ is omitted then it is understood to be the uniform measure on $\mI$.
\end{definition}

We now give our definition of stability. 

\begin{definition}\label{def:eff-stab}
Let $G = \langle S:R\rangle $ be a finitely presented group. Let $\mC$ be a class of tracial von Neumann algebras. Let $\mu_S$ be a distribution on $S$ and $\mu_R$ a distribution on $R$. For $\delta:[0,1]\to[0,1]$ such that $\lim_{t\to 0}\delta(t)=0$ we say that $G=\langle S:R\rangle$ is $(\delta,\mu_S,\mu_R,\mC)$-stable if for every $(\cM,\tau)$ in $\mC$, every $(\eps,\mu_R)$-almost homomorphism of $G$ is $(\delta(\eps),\mu_S)$-close to a unitary representation of $G$ on some $(\mN,\tau^\mN)\in \mC$. 
\end{definition}

\subsection{General results}

We do not know many general results about stability. We give two. First of all, 
for a finite group $G$ we can always write $G=\langle S:R\rangle$ where $S = G$ and $R=\{ g\cdot h \cdot (gh)^{-1} =e \}$. We refer to this presentation as the \emph{exhaustive presentation}. If we let $\mu_S$ and $\mu_R$ be the uniform distribution on $S$ and on $R$ respectively then Definition~\ref{def:eff-stab} reduces to a widely used notion of \emph{flexible (Hilbert-Schmidt) stability}. In particular, for finite groups the following result is known~\cite{gh,thom}.

\begin{theorem}\label{thm:gh}[Theorem~1.4 in~\cite{de2022spectral}]
Let $G$ be a finite group and $\mC$ the class of all tracial von Neumann algebras. Let $U_S$ and $U_R$ be the uniform distribution on $S=G$ and $R=\{ g\cdot h \cdot (gh)^{-1}=e \}$ respectively. Then $G=\langle S:R\rangle$ is $(O(\eps),U_R,U_C,\mC)$-stable. 
\end{theorem}

Next we state a result from de la Salle~\cite{de2022spectral} which allows to combine stability results. The results in~\cite{de2022spectral} are general, and in particular allow to show that the direct product of stable groups is stable. Here, we will only use the following specialization to the case of $\Z_2^k$, which is the only setting that we will use. For a measure $\mu$ on $\Z_2^k$, define its spectral gap 
\[ \kappa = \max_{a\neq 0} \frac{1}{1-\Es{b\sim\mu}(-1)^{a\cdot b}}\;.\] 

\begin{theorem}[\cite{de2022spectral} Corollary 2.6]
Let $\mu$ be a measure on $\Z_2^k$ with spectal gap $\kappa$. Let $\phi_X,\phi_Z: \Z_2^k \to \mU(\mM)$ be two homomorphisms such that
\[ \Es{a,b\sim \mu} \big\| \phi_X(a)\phi_Z(b)-(-1)^{a\cdot b} \phi_Z(b)\phi_X(a)\big\|_\tau^2 \,\leq\,\eps\;.\]
Then there are representations $U_X,U_Z:\Z_2^k\to\mN$ and $\delta=O(\kappa^2\eps)$ such that $\phi_X$ and $U_X$ are close, $\phi_Z$ and $U_Z$ are close, and moreover $U_X(a)U_Z(b)=(-1)^{a\cdot b}U_Z(b)U_X(a)$ for all $a,b\in\Z_2^k$.
\end{theorem}


\subsection{Simple examples}

As a first simple application we spell out the application of Theorem~\ref{thm:gh} to the case of $G=\Z_2^k$ and $\mC$ the class of finite-dimensional matrix algebras. To emphasize the analogy between the following result and the \emph{Blum-Luby-Rubinfeld linearity test} in property testing~\cite{} we state the result for a restricted class of approximate homomorphisms, and give the consequence in a way that leverages the simple representation theory of $\Z_2^k$. 

\begin{corollary}\label{cor:lin-test}
Let $d\geq 1$ and $\phi:\Z_2^k \to \Obs(\C^d)$ be such that 
\[ \Es{x,y\in \Z_2^k} \big\| \phi(x)\phi(y)-\phi(x+y) \big\|_{\tau_d}^2 \,\leq\,\eps\;.\]
Then there is a $d'=(1+O(\eps))d$, an isometry $w:\C^d \to \C^{d'}$ and a projective measurement $\{P_u\}_{u\in \Z_2^k}$ on $\C^{d'}$ such that 
\[ \Es{x\in \Z_2^k} \Big\| \phi(x) - w^* \Big(\sum_u (-1)^{u\cdot x} P_u\Big) w \Big\|_{\tau_d}^2 \,=\, O(\eps)\;.\]
\end{corollary} 

\begin{proof}
Any $\phi$ as in the corollary statement is an $(\eps,U_R)$-almost homomorphism of $\Z_2^k$ into $(M_d(\C),\tau_d)$ for the exhaustive presentation. Applying Theorem~\ref{thm:gh}, $\phi$ is $O(\eps)$-close to a homomorphism into $M_{d'}(\C)$. Such a homomorphism is given by commuting Hermitian unitaries $(U_x)_{x\in\Z_2^k}$ on $\C^{d'}$. Then it is easy to verify that for $u\in \Z_2^k$, $P_u = \Es{x} (-1)^{u\cdot x} U_x$ is a projection such that $\sum_u P_u=\Id$ and the $\{P_u\}$ satisfy the conclusion of the corollary. 
\end{proof}

There is a more efficient presentation of $\Z_2^k$, given by

\begin{equation}\label{eq:z2-efficient}
 \Z_2^k = \langle x_1,\ldots,x_k : [x_i,x_j]=e, x_i^2=e \; \forall i\neq j \rangle\;.
\end{equation}

We call this presentation ``efficient'' because it has a number of generators and relations that is far smaller than those of the exhaustive presentation; in this case, polylogarithmic. As one would naturally expect, this presentation has a weaker modulus of stability. 



\begin{lemma}[Lemma 3.8 in~\cite{slofstra2019set}]\label{lem:eff-z2}
For every $k$, there is a $\delta_k = O_k(\eps)$ such that the presentation~\eqref{eq:z2-efficient} is $\delta_k$-stable. Furthermore, the close representation can be taken on the same algebra. 
\end{lemma}

The dependence of $\delta_k$ on $k$ that comes out of the proof from~\cite{slofstra2019set} is exponential, i.e. $\delta_k(\eps)\leq C^k \eps$ for some $C>1$. In Section~\ref{} we give a presentation that has an intermediate trade-off. 

We end with a non-Abelian group that is central to applications in quantum information, the \emph{Pauli group}. For an integer $k\geq 1$,  the Pauli group $\pauli_k$ can be defined as follows. Let $\gamma: \Z_2^k\times \Z_2^k \to \{-1,1\}$ be given by $\gamma(a,b)=(-1)^{a\cdot b}$. Then $\pauli_k$ is the central extension of $\Z_2^k\times \Z_2^k$ by $\{-1,1\}$ given by $\gamma$. Alternatively, $\pauli_k$ is the group generated by the Pauli matrices 
\[ \sigma_X(a) = , \sigma_Z(b) =\]
for $a,b\in \Z_2^k$. It is also known as the Heisenberg group $H_{2k+1} = \{\begin{pmatrix} 1 & a & c \\ 0 & 1_k & b \\ 0 & 0 & 1 \end{pmatrix} \}\subseteq GL_{k+2}(\F_2)$. Concretely, we label elements of the Pauli group as triples $(J,a,b)$ where $J$ is a special label and $a,b\in\Z_2^k$, and consider the following presentation for it:
\[ \pauli_k \,=\, \langle (a,b), a,b\in \Z_2^k : (a,b)(a',b') = J^{a\cdot b'} (a',b')(a,b) \rangle_{\Z_2}\;.\] 
This presentation is not quite the exhaustive presentation (it has $2^{2k}+1$ generators, when $|\pauli_k|=2^{2k+1}$), but it is not far from it.  
Applying Theorem~\ref{thm:gh} we obtain the following consequence, which we again state only for the case of a subclass of approximate homomorphisms and the class of finite-dimensional matrix algebras. 

\begin{corollary}[Pauli braiding test]
Let $\phi_X,\phi_Z:\Z_2^k \to \Obs(\C^d)$ be such that for all $W\in \{X,Z\}$,
\[ \Es{a,b\in \Z_2^k} \big\| \phi_W(a)\phi_W(b)-\phi_W(a+b) \big\|_F^2 \,\leq\,\eps\;,\]
and
\[ \Es{a,b\in \Z_2^k} \big\| \phi_X(a)\phi_Z(b)- (-1)^{a\cdot b} \phi_Z(b)\phi_X(a) \big\|_{\tau_d}^2 \,\leq\,\eps\;.\]
Then there is a $d'=(1+O(\eps))d2^{-k}$ and an isometry $w:\C^d \to (\C^2)^{\otimes k} \otimes \C^{d'}$ such that for all $W\in \{X,Z\}$, 
\[ \Es{W\in \Z_2^k} \big\| \phi_W(a) - w^* \big(\sigma_W(a)\otimes \Id\big) w \big\|_{\tau_d}^2 \,=\, O(\eps)\;.\]
\end{corollary}

\begin{proof}
\tnote{todo}
\end{proof}

Similarly to Lemma~\ref{lem:eff-z2} we can state an ``efficient'' version of the preceding corollary, which applies to the presentation
\begin{equation}\label{eq:pauli-efficient}
 \pauli_k = \langle x_1,\ldots,x_k,z_1,\ldots,z_k : [x_i,x_j]=[z_i,z_j]=[x_i,z_j]=e, x_i^2=z_i^2=e, \{x_i,z_i\}=e \; \forall i\neq j \rangle\;.
\end{equation}

\begin{lemma}[\cite{Chao-Reichardt}]\label{lem:eff-pauli}
For every $k$, there is a $\delta_k = O_k(\eps)$ such that the presentation~\eqref{eq:pauli-efficient} is $\delta_k$-stable.
\end{lemma}




\section{Efficient stability for the Pauli group}

The goal of this section is to re-formulate, in the language of this paper, a result that plays an important role in~\cite{mipre}. To state the result we first introduce a specific linear error-correcting code. 

\subsection{Presentations from codes}
\label{sec:pres-code}

A linear $[n,k,d]_2$ code is a $k$-dimensional subspace $\code$ of $\F_2^k$ such that for all $x\in \code$ such that $x\neq 0$, the Hamming weight $|x|\geq d$. A code can be specified by a \emph{parity check matrix} $h\in \F_2^{m\times n}$ by setting $\code = \ker h$. A parity check matrix for a code of dimension $k$ implies a presentation of $\Z_2^k$ as
\[ \Z_2^k \,=\, \langle x_1,\ldots,x_n \,:\;,\, \prod_{1\leq j \leq k} x_j^{h_{ij}}=e \,, [x_{j},x_{j'}]= e \, \; \forall 1\leq i\leq n\rangle,\, j\neq j': h_{ij}\neq 0, h_{ij'}\neq 0\;.\]
\tnote{this needs to be written better. The point is that commutation relations are only enforced on variables that appear in the same constraint}
For readability it is convenient to reformulate the parity check matrix as a \emph{tester} for the code. This allows us to give a more succinct, ``algorithmic'' definition of a parity check matrix for a given code. Informally, the tester takes as input a word $w\in \F_2^n$ and determines if $w\in \mC$ by selecting a parity check at random and evaluating it. 
 Specifically we give the following definition. 

\begin{definition}[$r$-local linear tester]\label{def:code-test}
Let $\code$ be an $[n,k,d]_q$ linear code and $r\in \N$.
An \emph{$r$-local linear tester for $\code$} is a pair $M = ((M_S)_{S \subseteq [n]},\nu)$ where $\nu$ is a distribution over subsets $S\subseteq [n]$ of size at most $r$, and for each such subset $M_S:\F_q^S\to\F_q$ is a linear function such that $u\in \code$ if and only if for all $S$ in the support of $\mu$, $M_S(u_S)=0$.\footnote{Generally one imposes stronger ``soundness'' conditions on the tester. However, we will not need to be more specific than this.}
\end{definition}

We conclude with an example, the \emph{Hadamard code}. This code can be defined for any  $t\geq 1$ and it is an $[T,t,T/2]_2$ linear code, where $T=2^t$. For simplicity we write  $\code_\had$ to denote this code, omitting $t$. As a linear map, for $i\in\{1,\ldots,t\}$, $\code_\had(e_i) = (x_i)_{x\in \field^t} \in \field^T$, where we identify the index set $\{1,\ldots,T\}$ with the set $\field^t$ in an arbitrary way.  

It is shown in~\cite{blum1990self} that there is a $3$-local $\delta$-tester $M_\had$ for $\code_\had$, where $\delta(\eps)=6\eps$. The distribution $\nu_\had$ is uniform over subsets $\{ x, y, x+y \} \subset \field^t$ where $x,y\in \field^t$ are uniformly and independently chosen. For all $u \in \field^T$, the predicate $M_{\had,S}(u|_S) = 1$ if and only if $u_x + u_y = u_{x+y}$ (where we think of the coordinates of $u$ as being indexed by elements of $\field^t$). 



\subsection{The Reed-Muller code over $\F_q$}

Fix integers $m,t \in \N$ and let $q=2^t$ and $M = 2^m$. Let $\mP(q,m,d)$ be the vector space over $\F_q$ that consists of all $m$-variate polynomials $f$ over $\F_q$ of individual degree at most $d$, that is all functions of the form
\[
	f(x_1,\ldots,x_m) = \sum_{\alpha \in \{0,1,\ldots,d\}^m} c_\alpha\,
  x_1^{\alpha_1} \cdots x_m^{\alpha_m}\;,
\]
where $\{c_\alpha\}$ is a collection of coefficients in $\F_q$. It is easy to verify that $\mP(q,m,d)$ has dimension $D = (d+1)^m$ over $\F_q$. It follows that the map $\mC_\RM: (c_\alpha) \mapsto f$ defines a $[q^m,(d+1)^m,D]_q$ linear code over $\F_q$, where $D\geq (1-md/q)q^m$ follows from the Schwartz-Zippel lemma: 

\begin{lemma}[Schwartz-Zippel lemma~\cite{Sch80,Zip79}]
  \label{lem:schwartz-zippel}
  Let $f, g: \F_q^m \to \F_q$ be two unequal polynomials with total degree at most $d$. Then
  \begin{equation*}
    \Pr_{x \sim \F_q^m}\big(f(x) = g(x)\big) \leq \frac{d}{q}\;.
  \end{equation*}
\end{lemma}


We define a tester $M_{\RM}$ for the code $\mC_\RM$ over $\F_q$, see Figure~\ref{fig:RM-tester}. The second test applied by the tester, the subcube commutation test, may seem superfluous, because it always accepts. However, the test is important to show that the code is robust. Note that including the test imposes a non-trivial constraint of pairwise approximate commutation on representations of $\mC_\RM$, and hence also on $\eps$-local presentations. Both tests are easily seen to be linear; in particular, testing that $q$ entries match the truth table of a polynomial of degree at most $d$ can be done by checking $(n-d-1)$ linear equalities, because the set of evaluation vectors  of polynomials of  degree at most $d<m$ at any $m$ distinct points  is a linear subspace of dimension $(d+1)$ of $\F_q^m$. 

\begin{figure}[!htbp]
  \centering
  \begin{gamespec}
Perform one of the following tests with probability~$\tfrac{1}{2}$ each. 
\begin{enumerate}
	\item \textbf{Axis-parallel lines test:}
		Let $u \sim \F_q^m$ be a uniformly random point, $j\sim \{1,\ldots,m\}$ chosen uniformly at random,
		and let $\ell = \{ (u_1,\ldots,u_{j-1},s,u_{j+1},\ldots,u_m) \in \F_q^m : s \in \F_q \}$
		be the axis-parallel line passing through $u$ in the $j$-th direction. Read the entries indexed by $\ell$ and accept if and only if they match a degree-$d$ polynomial. 
	\item \textbf{Subcube commutation test:}
	Sample $j \sim \{1,\ldots,m\}$ uniformly at random, and sample $x_{m-j+2},\ldots,x_{m} \sim \F_q$ uniformly at random. Sample $u,v$ independently and uniformly at random from $\F_q^m$, conditioned on the last $(j-1)$ coordinates of both points being $x_{m-j+2},\ldots,x_m$. Read the entries indexed by $u$ and $v$ and accept. 	
    \end{enumerate}
  \end{gamespec}
  \caption{A local test for $\code_{\RM}$}
  \label{fig:RM-tester}
\end{figure}



\begin{theorem}\label{thm:mrm-sound}
$M_\RM$ has quantum soundness $\delta(\eps)=\poly(m,d)\cdot \poly(\eps,n^{-1})$.
\end{theorem}

\begin{proof}
In~\cite{ji2022quantum} it is shown that the game $G_{\code_\RM,M_\RM}$ (played using $\F_q$ as the base field) is $(\delta,\nu)$-robust, where $\nu$ is the uniform distribution over $\F_q^m \subseteq \mX$ and $\delta$ satisfies $\delta(\eps)=\poly(m,d)\cdot \poly(\eps,n^{-1})$. The theorem follows by the second item of Proposition~\ref{prop:sound-game}. 
\end{proof}






\subsection{Code composition}
\label{sec:code-comp}

 The Reed-Muller code from the previous section is defined over $\F_q$, for $q$ a large prime power. We can transform any $q$-ary code, for $q=2^t$, into a binary code using the idea of \emph{code composition} which we now describe. 

For $q=2^t$ and $a\in \field$ we let $\kappa(a)\in\F_2^t$ denote the binary representation of $a$, taken in a fixed but usually left implicit self-dual basis of $\F_2^t$ over $\F_2$. We extend $\kappa$ to vectors over $\field$ coordinate-wise. We let $\tr(\cdot):\F_q\to\F_2$ denote the trace over $\F_2$. Because we chose a self-dual basis for the binary representation, the trace satisfies $\tr(ab)=\kappa(a)\cdot\kappa(b)$. 

Let $q=2^t$ and $\code$ an $[n,k,d]_q$ linear code. Let $\code_{\Had}$ be the Hadamard code over $\F_2^t$ (see Section~\ref{sec:had}). Let $T=2^t$.
Let $\mC'$ be the $[Tn,tk,d']$ linear code over $\F_2$ defined as follows. Given $a\in (\F_2^t)^{k}$, first map $a\mapsto a'=\kappa^{-1}(a) \in \F_q^{k}$. Then encode $a'$ to $b'=\code_\RM(a')\in \F_q^n$. Finally, return $b=\code_\Had(\kappa(b'))\in(\F_2^T)^n$, where $\code_\Had$ is applied component-wise. Using that $\code_\Had$ has relative distance $\frac{1}{2}$, it is easy to verify that this code has distance $d'\geq dT/2$.

Given an $r$-local $\delta$-tester $M$ for $\code$, there is a natural $rq$-local tester $M'$ for $\code'$ which can be described as follows. Index coordinates of $\code'$ by pairs $(i,\alpha)\in [n]\times\F_2^t$, fixing a bijection between $[Tn]$ and $[n]\times \F_2^t$. Then $\nu'$ is the uniform mixtures of two distributions, $\nu'_1$ and $\nu'_2$. To sample from $\nu'_1$, sample $S\sim\nu$ and return the set $S\times\F_2^t$. To sample from $\nu'_2$, sample $i\sim[n]$ uniformly at random and $x,y\in\F_2^t$ uniformly at random, and return $\{i\}\times\{x,y,x+y\}$. The decision predicate $M'$ executes $M$ for all sets of the form $S\times \F_2^t$, and the tester for the Hadamard code (Section~\ref{sec:had}) for sets of the form $\{i\}\times\{x,y,x+y\}$.


\subsection{The code game}

To make the connection with the literature on non-local games we associate a game $G_{\code,M}$ to any code $\code$ and local tester $M$ for it. In the game, one player is asked to provide an assignment to all variables in the set $S$ queried by the tester, that will satisfy its test, while the other player is asked to provide an assignment to a single $i\in S$, and checked for consistency with the first player. The formal definition follows.  

\begin{definition}
Let $\code$ be an $[n,k,d]_q$ linear code and $M$ an $r$-local tester for $\code$. The game $G_{\code,M}$ is defined as follows. We set 
\[\mX = \{ S\subseteq \{1,\ldots,n\},|S|\leq r\} \sqcup\{1,\ldots,n\}\quad\text{and}\quad \mu(S,i)=\frac{1_{i\in S}}{|S|}\nu(S)\;,\]
and for any $S,i\in\mX$, $\mA(S)=\F_q^S$ and $\mA(i)=\F_q$, and finally $D(S,i,a,b)=M(S,a)1_{a_i=b}$. 
\end{definition}

We show the following. It is a variation on~\cite[Proposition 3.4]{slofstra2019set}.

\begin{proposition}\label{prop:sound-game}
Let $\code$ be an $[n,k,d]_q$ linear code and $M$ an $r$-local tester for $\code$ with distribution $\nu$. Let $\delta,\delta':[0,1]\to[0,1]$. Then if $\phi:\code\to \mU(\mA)$ is an $\eps$-homomorphism, there is a strategy $\strategy$ for $G_{\code,\mM}$ on $(\mN,\tau^\mN)$ such that the second prover's projective measurements are $\{\phi(i)\}_{1\leq i \leq n}$ and $\omega^*(\G_{\code,M},\strategy)\geq 1-\eps$. 
\end{proposition}

We note that a converse to the proposition also holds. The converse is easier and we will not need it, so we skip it. 

\begin{proof}
Let $\phi$ be an $\eps$-homomorphism of $G=\langle S:R\rangle$ on $(\mM,A)$. For each $S$ in the support of $\mu$ and $i\neq j \in S$ the constraint $[x_i,x_j]=e$ appears in $R$. Therefore, the restriction of $\phi$ to $S$ is an $\eps_S$-homomorphism of $\Z_2^S$, where $\eps_S$ is such that $\Es{S\sim \mu} \eps_S = O(\eps)$. Applying Lemma~\ref{lem:eff-z2} we deduce that there is a family $\{P^S_a\}_{a\in \F_2^S}$ of projective measurements on $(\mM,A)$ that satisfy 
\[ \Es{S \sim \nu} \Es{i\in S} \sum_{a \in \F_q} \big\| \phi(i)_a - P^S_a \big\|_\tau^2  \,\leq\,O(\eps)\;.\]
\end{proof}

Later we also use the following proposition, which relates the code games obtained before and after code composition. 


\begin{proposition}\label{prop:q-to-2}
Let $\code$ be an $[n,k,d]_q$ code and $M$ an $r$-local tester for it. Let $M'$ be the $rq$-local tester for $\code'$ obtained as above. Let $\strategy'$ be such that $\omega^*(G_{\code',M'},\strategy')\geq 1-\eps$. Then there is a strategy $\strategy$ for $G_{\code,M}$ such that \tnote{some closeness condition} 
\end{proposition}

\begin{proof}
Let $\strategy'$ be such that $\omega^*(G_{\code',M'},\strategy')\geq 1-\eps$. Restricting to questions in the support of $\nu'_2$, for each $i$ we obtain an $\eps_i$ and a strategy $\strategy_i$ for $G_{\had,M_\had}$ that succeeds with probability $1-\eps_i$, and $\Es{i} \eps_i \leq 2\eps$. 

By quantum soundness of $\code_\Had$ (Theorem~\ref{thm:had-qsound}\tnote{adapt}), for each $i$ there exists commuting $\{\hat{A}^{(i,\alpha)}\}$ that are $O(\eps_i)$-close to the $\{A^{(i,\alpha)}\}$ and moreover are a representation of $\code_{\Had}$. Let $w^{(i)}$ be the implied isometry. For every $a\in \F_2^t$, define $\hat{A}^{i}_{a}=\Es{\alpha}(-1)^{a\cdot \alpha} \hat{A}^{(i,\alpha)}$. Then by linearity this is a projective measurement:
\begin{align*}
\big(\hat{A}^{i}_{a}\big)^2 &=\Big(\Es{\alpha}(-1)^{a\cdot \alpha} \hat{A}^{(i,\alpha)}\Big)^2\\
&= \Es{\alpha,\alpha' }(-1)^{a\cdot (\alpha+\alpha')} \hat{A}^{(i,\alpha)}\hat{A}^{(i,\alpha')}\\
&=\Es{\alpha,\alpha' }(-1)^{a\cdot (\alpha+\alpha')} \hat{A}^{(i,\alpha+\alpha')}\\
&=\hat{A}^{i}_{a}\;,
\end{align*}
where the third line uses that  $\{A^{(i,\alpha)}\}$ are a representation of $\code_{\Had}$. Moreover, $\sum_a \hat{A}^{i}_{a} = \hat{A}^{(i,0)}=\Id$. Hence using Lemma~\ref{lem:pull-back}, for every $i$ we obtain a projective measurement $\{\tilde{A}^{i}_{a}\}$ on $\cM$ such that
\begin{equation}\label{eq:qto2-1a}
 \sum_a \big\| \tilde{A}^i_a - (w^{(i)})^* \hat{A}^i_a (w^{(i)}) \big\|_2^2 \,=\, O(\eps_i)\;.
\end{equation}
%Moreover,
%\begin{equation}\label{eq:qto2-1}
%\Es{i} \Es{\alpha}  \Big\| A^{(i,\alpha)} - \sum_a (-1)^{a\cdot\alpha}(w^{(i)})^* \hat{A}^i_a (w^{(i)})\Big\|^2
%\,=\, \Es{i} \Es{\alpha}  \big\| A^{(i,\alpha)} - (w^{(i)})^* \hat{A}^{i,\alpha} (w^{(i)})\big\|^2 \,=\, O(\eps)\;,
%\end{equation}
%by closeness. Combining~\eqref{eq:qto2-1a} with~\eqref{eq:qto2-1} through the triangle inequality gives
We then get
\begin{align}
 \Es{i} \sum_a \Big\| \Es{\alpha} (-1)^{a\cdot \alpha} A^{(i,\alpha)} -  \tilde{A}^i_a \Big\|_2^2 
&\leq  2\Es{i} \sum_a \Big\| \Es{\alpha} (-1)^{a\cdot \alpha} A^{(i,\alpha)} -  (w^{(i)})^* \hat{A}^i_a (w^{(i)}) \Big\|_2^2 + O(\eps)\notag\\
&=  2\Es{i} \sum_a \Big\| \Es{\alpha} (-1)^{a\cdot \alpha} A^{(i,\alpha)} -   \Es{\alpha} (-1)^{a\cdot \alpha} (w^{(i)})^* \hat{A}^{i,\alpha} (w^{(i)}) \Big\|_2^2+ O(\eps) \notag\\
&= 2\Es{i} \Es{\alpha} \big\| A^{(i,\alpha)} -    (w^{(i)})^* \hat{A}^{i,\alpha} (w^{(i)}) \big\|_2^2+ O(\eps)\notag\\
&= O(\eps)\;, \label{eq:qto2-2}
\end{align}
where the first line uses the triangle inequality and~\eqref{eq:qto2-1a}, the second line uses the definition of $\hat{A}^i_a$, the third line is Parseval's identity and the last is by closeness. 

Now for $b\in \F_q$ define $\tilde{B}^{S,i}_b= \Es{\alpha} (-1)^{b\cdot \alpha} B^{S\times \F_2^t,(i,\alpha)}$, which for the same reasons as earlier is a projective measurement. 
To conclude we show that $\{\tilde{A}^{i}\}$ and $\{\tilde{B}^{S,i}\}$ form a strategy in $G_{\code, M}$ that succeeds with probability $1-O(\eps)$. This is because
\begin{align*}
\Es{S}\Es{i} \sum_b \big\| \tilde{A}^i_b - \tilde{B}^{S,i}_b \big\|_2^2
&\leq 2\Es{S}\Es{i} \sum_b \Big\| \Es{\alpha} (-1)^{b\cdot \alpha} {A}^{(i,\alpha)} - \Es{\alpha} (-1)^{b\cdot \alpha} B^{S\times \F_2^t,(i,\alpha)}\Big\|_2^2 + O(\eps)\\
&= 2\Es{S}\Es{i} \Es{\alpha}\big\|  {A}^{(i,\alpha)} -  B^{S\times \F_2^t,(i,\alpha)}\big\|_2^2 + O(\eps)\\
&\leq 4\eps + O(\eps)\;,
\end{align*}
where the first inequality is by~\eqref{eq:qto2-2} and the triangle inequality, the second line by Parseval's formula and the last is by assumption. 
\end{proof}




\subsection{An efficient presentation for $\Z_2^k$}

Let $\Z_2^k = \langle S_k : R_k\rangle$ be the presentation of $\Z_2^k$ derived from the binary Reed-Muller code as described in Section~\ref{sec:pres-code}. Then $|S_k|,|R_k|=\poly\log(k)$. Furthermore, based on results from~\cite{} we have the following. 

\tnote{keep proposition 4.3 from the other paper. So we make the connection with the code game in general. The only change in the proof is that we need to use the $\Z_2$-stability result to replace the $B$ measurements}

\begin{theorem}
Let $\mC$ be the class of all tracial von Neumann algebras. 
The presentation  $\Z_2^k = \langle S_k : R_k\rangle$ is $(\delta,\mC)$ stable with $\delta(\eps)=$. 
\end{theorem}

\begin{proof}
Let $\phi$ be an $\eps$-homomorphism of $\langle S_k:R_k\rangle$ on $(\mU(\mA),\tau)$. This implies the following. For every $u\in \F_q^m$ and $a\in \F_2^t$ there is an $s_{u,a}\in S_k$ such that 
\begin{equation}\label{eq:stab-rm-1}
\Es{u\in \F_q^m} \Es{a,b\in \F_2^t} \big\|\phi(s_{u,a})\phi(s_{u,b})\phi(s_{u,a+b})-\Id\big\|_\tau^2 \,\leq\, 2\eps\;,
\end{equation}
and \tnote{adapt; need to not read all points on line --- edit the tester}
\begin{align}
\Es{\ell\subset \F_q^m,u_1,\ldots,u_{d+2}\in \ell} \big\| \prod_{1\leq i \leq d+2} \phi(u_i)^h_i - \Id \big\|_\tau^2 &\leq 4\eps\;,
\Es{u,v\in \F_q^m}
\end{align}
We first show the following. 

\begin{claim}
For every $u\in \F_q^m$ there is a projective measurement $\{P^u_a\}_{a\in \F_q\}$ such that 
\[ \Es{u\in \F_q^m} \Es{a\in \F_2^t} \big\| \phi(s_{u,a}) - \sum_b (-1)^{\tr(ab) P^u_b \big\|_\tau^2 \,=\, O(\eps)\;. 
\end{claim}

\begin{proof}
This follows from~\eqref{eq:stab-rm-1} and Corollary~\refl{cor:lin-test} \tnote{which needs to be adapted to non-observable maps}\tnote{we're also using that for abelian groups, and for orthonormalization, the algebra doesn't need to change?}
\end{proof}

\begin{claim}
For every axis-parallel line $\ell\subseteq \F_q^m$ there is a projective measurement $\{Q^\ell_g\}$ such that 
\[ \Es{u\in \F_q^m} \sum_f \tau\big( P^u_{f(u)} Q^\ell_g\big) \,\geq\, 1-\poly(\eps)\;. 
\end{claim}

\begin{proof}
We first observe that the restriction of $\phi$ to $\{(u,a)\}$ for $u\in \ell$ and $a\in \F_2^t$ is an $\eps_\ell$-homomorphism of $\Z_2^{tq}$, where $\eps_\ell$ is such that $\Es{\ell} \eps_\ell = O(\eps)$. \tnote{elaborate}

Applying Lemma~\ref{lem:eff-z2} we derive commuting observables, from which we can create that $Q^\ell$.
\end{proof}



\end{proof}





\section{Applications: nonlocal games}
	


\subsection{The Pauli braiding test}

\subsection{Qubit tests}

\subsection{Dimension bounds}


Formulate the PBT as an LCS. Get soundness as a corollary. 





\bibliography{qld}

\notesendofpaper

\end{document}
