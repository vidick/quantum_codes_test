\section{Dimension tests}
\label{sec:dim-test}

In this section we show that any strategy for the Pauli braiding test (with the parameters described previously) with value at least $1 - \eps$ must have dimension at least
\[
	\frac{2^s}{1 + \eps}
\]
where $s = $ \hnote{need to substitute the right parameters in}.

\hnote{just dumping this here for now, will integrate next}

\begin{theorem}
Let $(\mM,\tau)$ denote a tracial von Neumann algebra. 
Let $\tilde{X},\tilde{Z}: \Z_2^n \to U(\mM)$ be unitary homomorphisms satisfying
\[
\E_{a,b \sim \Z_2^n} \| \tilde{X}(a) \tilde{Z}(b) - (-1)^{a \cdot b} \tilde{Z}(b) \tilde{X}(a) \|_2^2 \leq \eps
\]
where $\| A \|_2^2 = \tau(AA^*)$. 
    \[
    \dim \mM \geq \frac{2^n}{1 + \eps}~.
    \]
\end{theorem}

If $\mM$ is infinite-dimensional then we are done. Assume that it is finite-dimensional. Then $\mM$ must be a direct sum of finite-dimensional matrix algebras, so without loss of generality let's assume that $\mM = B(\C^d)$ for some finite dimension $d$. The trace is then the normalized matrix trace $\tau(A) = \frac{1}{d} \Tr(A)$. 

Define the operators
\[
P_s := \E_{a \sim \Z_2^n} (-1)^{a \cdot s} \tilde{Z}(a)
\]
for all $s \in \Z_2^n$. 

The following properties are easily verified:
\begin{enumerate}
    \item $P_s$ is self-adjoint and $P_s^2 = P_s$.
    \item $P_s P_t = \delta_{st} P_s$.
    \item $\sum_{s \in \Z_2^n} P_s = I$.
\end{enumerate}

\begin{lemma}
    \[
    \E_{a \sim \Z_2^n} \sum_{s \in \Z_2^n} \| P_s - \tilde{X}(a) P_{s+a} \tilde{X}(a) \|_2^2 \leq \eps
    \]
\end{lemma}
\begin{proof}
We expand:
    \begin{align*}
        &\E_{a \sim \Z_2^n} \sum_{s \in \Z_2^n} \| P_s - \tilde{X}(a) P_{s+a} \tilde{X}(a) \|_2^2 \\
        &= \E_a \sum_s \tau \Big (P_s^2 + \tilde{X}(a) P_{s+a} \tilde{X}(a)^2 P_{s+a} \tilde{X}(a) -  P_s \tilde{X}(a) P_{s+a} \tilde{X}(a) -  \tilde{X}(a) P_{s+a} \tilde{X}(a) P_s \Big) \\
        &= \E_a \sum_s \tau(P_s) + \tau(P_{s+a}) - 2\tau(P_s \tilde{X}(a) P_{s+a} \tilde{X}(a) ) \\
        &= 2 - 2\E_a \sum_s 2\tau(P_s \tilde{X}(a) P_{s+a} \tilde{X}(a) )~.
    \end{align*}
    Here we used the properties of $P$'s, the cyclicity of the trace, and the fact that the unitaries $\tilde{X}(a)$ square to the identity. Focusing on the second term and using definition of $P$'s:
    \begin{align*}
        \E_a \sum_s \tau(P_s \tilde{X}(a) P_{s+a} \tilde{X}(a) ) &= \E_a \sum_s \E_{b,c} (-1)^{b \cdot s + c \cdot (s + a)} \, \, \tau \Big(\tilde{Z}(b) \tilde{X}(a) \tilde{Z}(c) \tilde{X}(a) \Big) \\
        &= \E_{a,b,c} \sum_s (-1)^{(b+c) \cdot s + c \cdot a} \, \, \tau \Big(\tilde{Z}(b) \tilde{X}(a) \tilde{Z}(c) \tilde{X}(a) \Big) \\
        &= \E_{a,b} (-1)^{b \cdot a}  \tau \Big(\tilde{Z}(b) \tilde{X}(a) \tilde{Z}(b) \tilde{X}(a) \Big)~.
    \end{align*}
    Plugging this back in we have that
    \begin{align*}
\E_{a \sim \Z_2^n} \sum_{s \in \Z_2^n} \| P_s - \tilde{X}(a) P_{s+a} \tilde{X}(a) \|_2^2 &= 2 - 2\E_a \sum_s \tau(P_s \tilde{X}(a) P_{s+a} \tilde{X}(a) ) \\
&= 2 - 2 \E_{a,b} (-1)^{b \cdot a}  \tau \Big(\tilde{Z}(b) \tilde{X}(a) \tilde{Z}(b) \tilde{X}(a) \Big) \\
&= \E_{a,b} \Big \|\tilde{X}(a) \tilde{Z}(b) - (-1)^{a \cdot b} \tilde{Z}(b) \tilde{X}(a) \Big \|_2^2  \\
&\leq \eps~.
    \end{align*}
\end{proof}

By averaging, there exists an $s \in \Z_2^n$ such that
\[
\E_{a \sim \Z_2^n} \| P_s - \tilde{X}(a) P_{s+a} \tilde{X}(a) \|_2^2 \leq 2^{-n} \eps~.
\]
Expanding the norm we get
\[
\E_a \tau(P_s) + \tau(P_{s+a}) - 2\tau(P_s \tilde{X}(a) P_{s+a} \tilde{X}(a)) \leq 2^{-n} \eps~.
\]
Rearranging,
\begin{align*}
\tau(P_s) &\leq 2^{-n} \eps - \E_a \tau(P_{s+a}) + 2 \E_a \tau(P_s \tilde{X}(a) P_{s+a} \tilde{X}(a))  \\
&\leq 2^{-n} \eps - \E_a \tau(P_{s+a}) + 2 \E_a \tau(\tilde{X}(a) P_{s+a} \tilde{X}(a)) \\
&= 2^{-n} \eps + \E_a \tau(P_{s+a}) \\
&= 2^{-n} \eps + 2^{-n} \tau(I) \\
&= (1 + \eps)2^{-n}~.
\end{align*}
Thus 
\[
(1 + \eps)2^{-n} \geq \tau(P_s) = \frac{1}{d} \Tr(P_s) \geq \frac{1}{d}
\]
and therefore
\[
    d \geq \frac{2^n}{1 + \eps}~.
\]

